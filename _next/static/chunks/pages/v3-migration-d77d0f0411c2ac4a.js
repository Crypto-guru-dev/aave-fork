(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4562],{40342:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return nt}});var n=r(59499),i=r(49501),s=r(61953),o=r(5152),a=r(11163),l=r(67294),c=r(45745),d=r(15446),u=r(25563),x=r(15070),p=r(75331),v=r(80854),h=r(1279),m=r(59148),b=r(27484),f=r.n(b),j=r(42568),g=r.n(j),y=r(83601),w=r(78371),Z=r(67728),C=r(25957),O=r(63263),k=r(52369),S=r(37197),D=r(45104),A=g()((function(e,t,r){return{reserves:e.reservesData,reservesIncentives:r,baseCurrencyData:e.baseCurrencyData,userEmodeCategoryId:t.userEmodeCategoryId,userReserves:t.userReserves}})),I=function(e){var t=(0,k.J)(e),r=(0,D.T)(e),n=(0,S.O)(e);return(0,C.W)([t,r,n],A)},P=r(49258);function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var T,E=g()((function(e,t,r,n,i,s,o){var a,l=e.borrowReserves,c=(null===t||void 0===t||null===(a=t.userReserves)||void 0===a?void 0:a.map((function(e){var t=e.scaledATokenBalance,r=e.principalStableDebt,n=e.scaledVariableDebt;return(0,Z.Wx)(i,e.underlyingAsset)>=0&&(t="0"),s.filter((function(t){return t.underlyingAsset==e.underlyingAsset})).filter((function(e){var t=l.find((function(t){return t.underlyingAsset==e.underlyingAsset}));return!!t&&void 0===t.migrationDisabled})).forEach((function(e){e.interestRate==p.tk.Stable?r="0":n="0"})),B(B({},e),{},{principalStableDebt:r,scaledATokenBalance:t,scaledVariableDebt:n})})))||[],d=(0,y.To)(t),u=(0,Z.qt)(null===t||void 0===t?void 0:t.reserves,null===t||void 0===t?void 0:t.reserveIncentives,c,d,f()().unix(),null===t||void 0===t?void 0:t.userEmodeCategoryId),x=(0,Z.B9)(i,e.supplyReserves,e.isolatedReserveV3),b=(0,Z.hA)(s,n,e),j=x.reduce((function(e,t){return e[t.underlyingAsset]=t,e}),{}),g=b.reduce((function(e,t){return e[t.debtKey]=t,e}),{}),w=n.userReservesData.map((function(e){var t=g[e.reserve.stableDebtTokenAddress],r=g[e.reserve.variableDebtTokenAddress],n=(0,Z.oO)(o,e),i=j[n],s=e.scaledVariableDebt,a=e.scaledATokenBalance,l=e.usageAsCollateralEnabledOnUser,c=(0,h.hE)(e.reserve.variableBorrowIndex);if(r&&void 0===r.migrationDisabled){var d=(0,m.e9)((0,v.gU)(r.increasedVariableBorrows,e.reserve.decimals),c);s=(0,h.hE)(s).plus(d).toString()}if(t&&void 0===t.migrationDisabled){var u=(0,m.e9)((0,v.gU)(t.increasedStableBorrows,e.reserve.decimals),c);s=(0,h.hE)(s).plus(u).toString()}if(i){var x;l=i.usageAsCollateralEnabledOnUserV3;var p=(0,h.hE)(e.scaledATokenBalance),b=(0,h.hE)(e.reserve.liquidityIndex),f=(null===(x=o[n])||void 0===x?void 0:x.amount)||(0,v.gU)(i.underlyingBalance,e.reserve.decimals),y=(0,m.e9)(f,b);a=p.plus(y).toString()}return B(B({},e),{},{id:e.reserve.id,scaledVariableDebt:s,scaledATokenBalance:a,usageAsCollateralEnabledOnUser:l})})),C=(0,y.To)(r),O=(0,Z.qt)(null===r||void 0===r?void 0:r.reserves,null===r||void 0===r?void 0:r.reserveIncentives,w,C,f()().unix(),null===r||void 0===r?void 0:r.userEmodeCategoryId);return{fromUserSummaryAfterMigration:u,toUserSummaryAfterMigration:{healthFactor:O.healthFactor,currentLoanToValue:O.currentLoanToValue,totalCollateralMarketReferenceCurrency:O.totalCollateralMarketReferenceCurrency,totalBorrowsMarketReferenceCurrency:O.totalBorrowsMarketReferenceCurrency}}})),R=r(55774),F=r(9608),N=r(77537),U=r(26079),_=r(33772),L=r(81481),V=r(62097),z=r(61225),W=r(70918),Y=r(22841),q=r(75158),H=r(29630),J=r(75084),G=r(81645),K=r(92391),X=r(69331),Q=r(18384),$=r(8195),ee=r(80227),te=r(78678),re=r(65445),ne=r(60082),ie=r(44731),se=r(80562),oe=r(73812),ae=r(31538),le=r(44373),ce=r(91655),de=r(96875),ue=r(63206),xe=r(85893),pe=function(e){var t,r=e.marketData,n=e.userSummaryAfterMigration,i=e.userSummaryBeforeMigration,o=e.selectableMarkets,a=e.setFromMarketData,c=e.loading,d=(0,l.useState)(null),u=d[0],x=d[1],p=Boolean(u),v=(0,ue.Mo)(r.chainId);return(0,xe.jsxs)(s.Z,{sx:{padding:"12px 16px 16px 16px",border:1,borderColor:"divider",borderRadius:3,width:"100%"},children:[(0,xe.jsx)(H.Z,{variant:"subheader2",color:"text.primary",sx:{mb:2},children:"From"}),(0,xe.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",mb:6},children:[(0,xe.jsx)(ne.Z,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:(0,xe.jsx)(ie.Z,{src:v.networkLogoPath,sx:{width:20,height:20}}),children:(0,xe.jsx)(ie.Z,{src:"/aave.svg",sx:{width:36,height:36}})}),(0,xe.jsx)(H.Z,{variant:"subheader1",sx:{ml:5},children:(t=r,"Aave ".concat(t.v3?"V3":"V2"," - ").concat(t.marketTitle).concat(t.isFork?" Fork":""))}),o&&a&&(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(se.Z,{onClick:function(e){x(e.currentTarget)},sx:{ml:"auto"},children:p?(0,xe.jsx)(te.Z,{}):(0,xe.jsx)(re.Z,{})}),(0,xe.jsx)(oe.Z,{open:p,onClose:function(){x(null)},anchorEl:u,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:o.map((function(e){return(0,xe.jsxs)(s.Z,{children:[(0,xe.jsx)(s.Z,{sx:{py:2,px:4},children:(0,xe.jsx)(H.Z,{color:"text.secondary",variant:"subheader2",children:e.title})}),e.markets.map((function(e){var t=(0,ue.Mo)(e.chainId);return(0,xe.jsxs)(ae.Z,{onClick:function(){return function(e){a&&a(e),x(null)}(e)},children:[(0,xe.jsx)(ne.Z,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:(0,xe.jsx)(ie.Z,{src:t.networkLogoPath,sx:{width:16,height:16}}),children:(0,xe.jsx)(ie.Z,{src:"/aave.svg",sx:{width:24,height:24}})}),(0,xe.jsx)(H.Z,{variant:"secondary14",sx:{ml:3},children:"".concat(e.marketTitle).concat(e.isFork?" Fork":"")})]},"".concat(e.marketTitle,"_").concat(e.isFork))}))]},e.title)}))})]})]}),(0,xe.jsx)(le.Z,{}),(0,xe.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mt:3},children:[(0,xe.jsx)(H.Z,{children:"Health Factor"}),(0,xe.jsx)(s.Z,{sx:{textAlign:"right"},children:(0,xe.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[!c&&i?(0,xe.jsx)(de.o,{value:i.healthFactor}):(0,xe.jsx)(ce.Z,{width:50}),(0,xe.jsx)(G.Z,{sx:{fontSize:"16px",color:"text.primary",mx:1},children:(0,xe.jsx)(ee.Z,{})}),!c&&n?(0,xe.jsx)(de.o,{value:n.healthFactor}):(0,xe.jsx)(ce.Z,{width:50})]})})]})]})};!function(e){e[e.NO_SELECTION=0]="NO_SELECTION",e[e.V2_HF_TOO_LOW=1]="V2_HF_TOO_LOW",e[e.V3_HF_TOO_LOW=2]="V3_HF_TOO_LOW",e[e.INSUFFICIENT_LTV=3]="INSUFFICIENT_LTV"}(T||(T={}));var ve=function(e){switch(e.blockingError){case T.NO_SELECTION:return(0,xe.jsx)(i.cC,{id:"No assets selected to migrate."});case T.V2_HF_TOO_LOW:return(0,xe.jsx)(i.cC,{id:"This action will reduce V2 health factor below liquidation threshold. retain collateral or migrate borrow position to continue."});case T.V3_HF_TOO_LOW:return(0,xe.jsx)(xe.Fragment,{children:(0,xe.jsx)(i.cC,{id:"This action will reduce health factor of V3 below liquidation threshold. Increase migrated collateral or reduce migrated borrow to continue."})});case T.INSUFFICIENT_LTV:return(0,xe.jsx)(i.cC,{id:"The loan to value of the migrated positions would cause liquidation. Increase migrated collateral or reduce migrated borrow to continue."});default:return(0,xe.jsx)(xe.Fragment,{})}},he=function(e){var t=e.disableButton,r=e.enteringIsolationMode,n=e.fromMarketData,o=e.toMarketData,a=e.userSummaryAfterMigration,c=e.userSummaryBeforeMigration,d=e.setFromMarketData,u=e.selectableMarkets,x=e.loading,p=(0,$.vR)().openV3Migration,v=(0,l.useState)(!1),m=v[0],b=v[1],f=(0,V.Z)(),j=(0,z.Z)(f.breakpoints.down("sm")),g=a?function(e,t,r){var n=e.toUserSummaryAfterMigration,i=n.totalCollateralMarketReferenceCurrency,s=n.totalBorrowsMarketReferenceCurrency,o=n.currentLoanToValue,a=(0,h.hE)(i).multipliedBy(o),l=(0,h.hE)(s).isGreaterThan(a);return t&&r?T.NO_SELECTION:Number(e.fromUserSummaryAfterMigration.healthFactor)<1.005&&"-1"!==e.fromUserSummaryAfterMigration.healthFactor?T.V2_HF_TOO_LOW:Number(e.toUserSummaryAfterMigration.healthFactor)<1.005&&"-1"!==e.toUserSummaryAfterMigration.healthFactor?T.V3_HF_TOO_LOW:l?T.INSUFFICIENT_LTV:null}(a,!!t,m):null;return(0,xe.jsx)(s.Z,{sx:{display:"flex",flexDirection:"column",width:{xs:"100%",lg:"40%"}},children:(0,xe.jsxs)(W.Z,{sx:{p:{xs:"16px 24px 24px 24px"},mb:{xs:6,md:0}},children:[(0,xe.jsx)(K.X,{caption:(0,xe.jsx)(i.cC,{id:"Migrate your assets"}),captionVariant:"h3",sx:{mb:6}}),(0,xe.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",gap:2,mb:12,position:"relative",alignItems:"center"},children:[(0,xe.jsx)(pe,{marketData:n,userSummaryBeforeMigration:null===c||void 0===c?void 0:c.fromUserSummaryBeforeMigration,userSummaryAfterMigration:null===a||void 0===a?void 0:a.fromUserSummaryAfterMigration,selectableMarkets:u,setFromMarketData:d,loading:x}),(0,xe.jsx)(s.Z,{border:1,borderColor:"divider",bgcolor:"background.paper",sx:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",borderRadius:"12px",width:36,height:36},children:(0,xe.jsx)(L.Z,{})}),(0,xe.jsx)(pe,{marketData:o,userSummaryBeforeMigration:null===c||void 0===c?void 0:c.toUserSummaryBeforeMigration,userSummaryAfterMigration:null===a||void 0===a?void 0:a.toUserSummaryAfterMigration,loading:x})]}),null!==g&&(0,xe.jsx)(X.v,{severity:"warning",children:(0,xe.jsx)(ve,{blockingError:g})}),r&&(0,xe.jsx)(Q.i,{severity:"warning"}),null===g&&(0,xe.jsx)(s.Z,{sx:{height:"44px",backgroundColor:"background.surface",borderRadius:"4px",display:"flex",justifyContent:"center",mb:4},"data-cy":"migration-risk-checkbox",children:(0,xe.jsx)(Y.Z,{sx:{margin:0},control:(0,xe.jsx)(q.Z,{checked:m,onChange:function(){return b(!m)},size:"small"}),label:(0,xe.jsx)(H.Z,{variant:"description",sx:{position:"relative",top:1},children:(0,xe.jsx)(i.cC,{id:"I fully understand the risks of migrating."})})})}),(0,xe.jsx)(s.Z,{children:(0,xe.jsx)(J.Z,{onClick:p,disabled:x||!m||null!==g,sx:{width:"100%",height:"44px"},variant:m&&null===g?"gradient":"contained",size:"medium","data-cy":"migration-button",children:(0,xe.jsx)(i.cC,{id:"Preview tx and migrate"})})}),(0,xe.jsxs)(s.Z,{sx:{p:j?"20px 16px":"20px 30px",mt:j?4:0},children:[(0,xe.jsxs)(H.Z,{variant:"h3",sx:{fontWeight:700,mb:{xs:4,lg:6},display:"flex",alignItems:"center"},children:[(0,xe.jsx)(G.Z,{sx:{fontSize:"24px",color:"warning.main",mr:2},children:(0,xe.jsx)(_.Z,{})}),(0,xe.jsx)(i.cC,{id:"Migration risks"})]}),(0,xe.jsx)(H.Z,{sx:{mb:{xs:3,lg:4}},children:(0,xe.jsx)(i.cC,{id:"Please always be aware of your <0>Health Factor (HF)</0> when partially migrating a position and that your rates will be updated to V3 rates.",components:{0:(0,xe.jsx)("b",{})}})}),(0,xe.jsx)(H.Z,{sx:{mb:{xs:3,lg:4}},children:(0,xe.jsx)(i.cC,{id:"Migrating multiple collaterals and borrowed assets at the same time can be an expensive operation and might fail in certain situations.<0>Therefore it\u2019s not recommended to migrate positions with more than 5 assets (deposited + borrowed) at the same time.</0>",components:{0:(0,xe.jsx)("b",{})}})}),(0,xe.jsx)(H.Z,{sx:{mb:{xs:4,lg:6}},children:(0,xe.jsx)(i.cC,{id:"Be mindful of the network congestion and gas prices."})})]})]})})},me=r(13902),be=r(58057),fe=r(21386),je=r(52906),ge=r(58771),ye=r(68861),we=r(58527),Ze=function(e){var t,r=e.dashboardLink,s=e.marketName,o=e.warningType,a=e.isolatedV3,l=(t={},(0,n.Z)(t,Z.b_.EModeBorrowDisabled,(0,xe.jsx)(i.cC,{id:"Asset cannot be migrated to {marketName} V3 Market due to E-mode restrictions. You can disable or manage E-mode categories in your <0>V3 Dashboard</0>",values:{marketName:s},components:{0:(0,xe.jsx)(ye.rU,{href:r||"",target:"_blank",underline:"always"})}})),(0,n.Z)(t,Z.b_.AssetNotFlashloanable,(0,xe.jsx)(i.cC,{id:"Flashloan is disabled for this asset, hence this position cannot be migrated."})),(0,n.Z)(t,Z.b_.InsufficientLiquidity,(0,xe.jsx)(i.cC,{id:"Asset cannot be migrated due to insufficient liquidity or borrow cap limitation in {marketName} v3 market.",values:{marketName:s}})),(0,n.Z)(t,Z.b_.NotEnoughtSupplies,(0,xe.jsx)(i.cC,{id:"Asset cannot be migrated due to supply cap restriction in {marketName} v3 market.",values:{marketName:s}})),(0,n.Z)(t,Z.b_.ReserveFrozen,(0,xe.jsx)(i.cC,{id:"Asset is frozen in {marketName} v3 market, hence this position cannot be migrated.",values:{marketName:s}})),(0,n.Z)(t,Z.b_.IsolationModeBorrowDisabled,a?(0,xe.jsx)(i.cC,{id:"Asset cannot be migrated because you have isolated collateral in {marketName} v3 Market which limits borrowable assets. You can manage your collateral in <0>{marketName} V3 Dashboard</0>",values:{marketName:s},components:{0:(0,xe.jsx)(ye.rU,{href:r||"",target:"_blank",underline:"always"})}}):(0,xe.jsx)(i.cC,{id:"Asset cannot be migrated to {marketName} v3 Market since collateral asset will enable isolation mode.",values:{marketName:s}})),(0,n.Z)(t,Z.b_.V3AssetMissing,(0,xe.jsx)(i.cC,{id:"Underlying asset does not exist in {marketName} v3 Market, hence this position cannot be migrated.",values:{marketName:s}})),t);return(0,xe.jsx)(we.G,{iconSize:16,color:"error.main",icon:(0,xe.jsx)(ge.Z,{}),children:(0,xe.jsx)(H.Z,{variant:"caption",color:"text.secondary",children:l[o]})})},Ce=r(44749),Oe=r(45884),ke=r(32383),Se=r(41024),De=r(14463),Ae=r(72667),Ie=r(54181),Pe=function(e){var t=e.enableAsCollateral,r=e.enabledAsCollateral;return(0,xe.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[(0,xe.jsx)(Ie.Z,{onClick:t,disableRipple:!0,checked:r,sx:{mb:-1.5}}),(0,xe.jsx)(Ce.Ch,{})]})},Me=function(e){var t=e.v2Amount,r=e.v2Price,n=e.v3Price,s=(0,l.useMemo)((function(){return function(e,t,r){if(!r)return{v3Amount:void 0,v3TotalPrice:void 0};var n=(0,h.hE)(t).div(r).multipliedBy(e),i=n.multipliedBy(r);return{v3Amount:n.toString(),v3TotalPrice:i.toString()}}(t,r,n)}),[t,r,n]),o=s.v3Amount,a=s.v3TotalPrice;return(0,xe.jsx)(X.v,{icon:!1,sx:{mb:4},severity:"error",children:(0,xe.jsxs)(H.Z,{variant:"caption",component:"span",children:[(0,xe.jsx)(i.cC,{id:"stETH tokens will be migrated to Wrapped stETH using Lido Protocol wrapper which leads to supply balance change after migration: {0}",values:{0:o?(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(Se.B,{variant:"caption",value:o})," (",(0,xe.jsx)(Se.B,{variant:"caption",value:a,symbol:"USD",symbolsColor:"error.100"}),")."]}):(0,xe.jsx)(De.J,{variant:"caption",component:"span"})}})," "]})})},Be=function(e){var t=e.checked,r=e.amount,n=e.amountInUSD,o=e.onCheckboxClick,a=e.enabledAsCollateral,l=e.disabled,c=e.enableAsCollateral,d=e.isIsolated,u=e.enteringIsolation,x=e.borrowApyType,v=e.userReserve,h=e.v3Rates,m=e.showCollateralToggle,b=e.isSupplyList,f=x?x===p.tk.Stable?v.stableBorrowAPY:v.reserve.variableBorrowAPY:v.reserve.supplyAPY,j=x?x===p.tk.Stable?v.reserve.sIncentivesData:v.reserve.vIncentivesData:v.reserve.aIncentivesData,g=x?(null===h||void 0===h?void 0:h.variableBorrowAPY)||"-1":(null===h||void 0===h?void 0:h.supplyAPY)||"-1",y=x?(null===h||void 0===h?void 0:h.vIncentivesData)||[]:(null===h||void 0===h?void 0:h.aIncentivesData)||[],Z=(0,w.Y)(),C=Z.currentMarket,O=Z.currentMarketData,k=(0,V.Z)(),S=void 0===l?"text.secondary":"text.muted",D=void 0===l?"text.primary":"text.muted",A=void 0===(null===h||void 0===h?void 0:h.ltv)&&void 0===(null===h||void 0===h?void 0:h.liquidationThreshold);return(0,xe.jsxs)(ke.H,{sx:{display:"flex",flexDirection:"column",pl:0},children:[(0,xe.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",width:"100%",pb:2,pt:2.5},children:[(0,xe.jsx)(Oe.h,{align:"center",maxWidth:48,minWidth:48,children:(0,xe.jsx)(s.Z,{sx:function(e){return{border:"2px solid ".concat(void 0!==l?e.palette.action.disabled:e.palette.text.secondary),background:void 0!==l?e.palette.background.disabled:t?e.palette.text.secondary:e.palette.background.paper,width:16,height:16,borderRadius:"2px","&:hover":{cursor:void 0!==l?"not-allowed":"pointer"},display:"flex",alignItems:"center",justifyContent:"center"}},onClick:void 0!==l?void 0:o,children:void 0===l&&(0,xe.jsx)(G.Z,{sx:{fontSize:"14px",color:"background.paper"},children:(0,xe.jsx)(be.Z,{})})})}),(0,xe.jsx)(Oe.h,{align:"left",children:(0,xe.jsxs)(K.X,{children:[(0,xe.jsx)(Ae.T1,{symbol:v.reserve.iconSymbol,fontSize:"large"}),(0,xe.jsxs)(s.Z,{sx:{pl:"12px",overflow:"hidden",display:"flex"},children:[(0,xe.jsx)(H.Z,{variant:"subheader1",color:D,noWrap:!0,sx:{pr:1},children:v.reserve.symbol}),void 0!==l&&(0,xe.jsx)(Ze,{dashboardLink:ye.Z6.dashboard+"/?marketName="+C+"_v3",marketName:O.marketTitle,warningType:l,isolatedV3:u})]})]})})]}),(0,xe.jsxs)(s.Z,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:2,pb:4,pl:12},children:[(0,xe.jsxs)(s.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,xe.jsx)(H.Z,{variant:"description",color:S,children:(0,xe.jsx)(i.cC,{id:"Current v2 Balance"})}),(0,xe.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[(0,xe.jsx)(s.Z,{sx:{display:"flex",alignItems:"flex-end",mb:.5},children:(0,xe.jsx)(Se.B,{value:r,variant:"secondary14",color:D})}),(0,xe.jsx)(Se.B,{value:n,variant:"secondary12",color:S,symbolsColor:S,symbol:"USD"})]})]}),(0,xe.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,xe.jsx)(H.Z,{variant:"description",color:S,children:(0,xe.jsx)(i.cC,{id:"APY change"})}),(0,xe.jsxs)(s.Z,{sx:{display:"flex"},children:[(0,xe.jsx)(je.J,{value:f,symbol:v.reserve.symbol,incentives:j,variant:"main14",color:D}),(0,xe.jsx)(G.Z,{sx:{px:1.5},children:(0,xe.jsx)(ee.Z,{fontSize:"14px",color:void 0===l?k.palette.text.secondary:k.palette.text.muted})}),(0,xe.jsx)(je.J,{value:g,symbol:v.reserve.symbol,incentives:y,variant:"main14",color:D})]})]}),!!c&&(0,xe.jsxs)(s.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,xe.jsx)(H.Z,{variant:"description",color:S,children:(0,xe.jsx)(i.cC,{id:"Collateral change"})}),(0,xe.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center"},children:[v.usageAsCollateralEnabledOnUser&&"0"!==v.reserve.reserveLiquidationThreshold?(0,xe.jsx)(fe.Z,{fontSize:"small",color:"success"}):(0,xe.jsx)(De.J,{variant:"main14",color:S}),(0,xe.jsx)(G.Z,{sx:{px:1.5},children:(0,xe.jsx)(ee.Z,{fontSize:"14px",color:void 0===l?k.palette.text.secondary:k.palette.text.muted})}),m?(0,xe.jsx)(Pe,{enableAsCollateral:c,enabledAsCollateral:a}):a?d?(0,xe.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,xe.jsx)(G.Z,{sx:{color:"warning.main",fontSize:"20px"},children:(0,xe.jsx)(me.Z,{})}),(0,xe.jsx)(Ce.Ch,{})]}):(0,xe.jsx)(fe.Z,{fontSize:"small",color:"success"}):(0,xe.jsx)(De.J,{variant:"main14",color:S})]})]}),!!x&&(0,xe.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,xe.jsx)(H.Z,{variant:"description",color:S,children:(0,xe.jsx)(i.cC,{id:"APY type change"})}),(0,xe.jsxs)(s.Z,{sx:{display:"flex"},children:[(0,xe.jsx)(J.Z,{variant:"outlined",size:"small",sx:{width:"50px",background:"white"},disabled:!0,children:(0,xe.jsx)(H.Z,{variant:"buttonS",color:D,children:x})}),(0,xe.jsx)(G.Z,{sx:{px:1.5},children:(0,xe.jsx)(ee.Z,{fontSize:"14px",color:void 0===l?k.palette.text.secondary:k.palette.text.muted})}),(0,xe.jsx)(J.Z,{variant:"outlined",size:"small",sx:{width:"50px",background:"white"},disabled:!0,children:(0,xe.jsx)(H.Z,{variant:"buttonS",color:D,children:"Variable"})})]})]}),b&&(0,xe.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,xe.jsx)(H.Z,{variant:"description",color:S,children:(0,xe.jsx)(i.cC,{id:"Max LTV"})}),(0,xe.jsx)(s.Z,{sx:{display:"flex"},children:A?(0,xe.jsx)(De.J,{variant:"main14",color:"text.secondary"}):(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(Se.B,{value:v.reserve.formattedBaseLTVasCollateral,percent:!0,variant:"main14",color:D}),(0,xe.jsx)(G.Z,{sx:{px:1.5},children:(0,xe.jsx)(ee.Z,{fontSize:"14px",color:void 0===l?k.palette.text.secondary:k.palette.text.muted})}),(0,xe.jsx)(Se.B,{value:(null===h||void 0===h?void 0:h.ltv)||0,percent:!0,variant:"main14",color:D})]})})]}),!b&&(0,xe.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,xe.jsx)(H.Z,{variant:"description",color:S,children:(0,xe.jsx)(i.cC,{id:"Liquidation threshold"})}),(0,xe.jsx)(s.Z,{sx:{display:"flex"},children:A?(0,xe.jsx)(De.J,{variant:"main14",color:"text.secondary"}):(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(Se.B,{value:v.reserve.formattedReserveLiquidationThreshold,percent:!0,variant:"main14",color:D}),(0,xe.jsx)(G.Z,{sx:{px:1.5},children:(0,xe.jsx)(ee.Z,{fontSize:"14px",color:void 0===l?k.palette.text.secondary:k.palette.text.muted})}),(0,xe.jsx)(Se.B,{value:(null===h||void 0===h?void 0:h.liquidationThreshold)||0,percent:!0,variant:"main14",color:D})]})})]})]}),"stETH"===v.reserve.symbol&&(0,xe.jsx)(s.Z,{sx:{pl:"16px",width:"100%"},children:(0,xe.jsx)(Me,{v2Price:v.reserve.priceInUSD,v2Amount:r,v3Price:null===h||void 0===h?void 0:h.priceInUSD})})]})},Te=function(e){var t,r=e.checked,n=e.amount,i=e.amountInUSD,o=e.onCheckboxClick,a=e.enabledAsCollateral,l=e.disabled,c=e.enableAsCollateral,d=e.isIsolated,u=e.enteringIsolation,x=e.borrowApyType,v=e.userReserve,h=e.v3Rates,m=e.userControlledCollateral,b=e.canBeEnforced,f=e.isSupplyList,j=(0,V.Z)(),g=(0,w.Y)(),y=g.currentMarket,Z=g.currentMarketData,C=(0,z.Z)(j.breakpoints.down(1125)),O=void 0===l?"text.primary":"text.muted",k=void 0===l?"text.secondary":"text.muted",S=void 0===(null===h||void 0===h?void 0:h.ltv)&&void 0===(null===h||void 0===h?void 0:h.liquidationThreshold),D=x?x===p.tk.Stable?v.stableBorrowAPY:v.reserve.variableBorrowAPY:v.reserve.supplyAPY,A=x?x===p.tk.Stable?v.reserve.sIncentivesData:v.reserve.vIncentivesData:v.reserve.aIncentivesData,I=x?(null===h||void 0===h?void 0:h.variableBorrowAPY)||"-1":(null===h||void 0===h?void 0:h.supplyAPY)||"-1",P=x?(null===h||void 0===h?void 0:h.vIncentivesData)||[]:(null===h||void 0===h?void 0:h.aIncentivesData)||[],M=m&&d&&b;return C?(0,xe.jsx)(Be,{checked:r,amount:n,amountInUSD:i,onCheckboxClick:o,enabledAsCollateral:a,disabled:l,enableAsCollateral:c,isIsolated:d,enteringIsolation:u,borrowApyType:x,userReserve:v,v3Rates:h,showCollateralToggle:M,isSupplyList:f}):(0,xe.jsxs)(ke.H,{sx:{flexDirection:"column",pl:0},"data-cy":"migration-".concat(void 0!==x?"borrow-"+x:"supply","-").concat(v.reserve.symbol),children:[(0,xe.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"row",width:"100%",alignItems:"center",my:4},children:[(0,xe.jsx)(Oe.h,{align:"center",maxWidth:64,minWidth:64,children:(0,xe.jsx)(s.Z,{sx:function(e){return{border:"2px solid ".concat(void 0!==l?e.palette.action.disabled:e.palette.text.secondary),background:void 0!==l?e.palette.background.disabled:r?e.palette.text.secondary:e.palette.background.paper,width:16,height:16,borderRadius:"2px","&:hover":{cursor:void 0!==l?"not-allowed":"pointer"},display:"flex",alignItems:"center",justifyContent:"center"}},onClick:void 0!==l?void 0:o,"data-cy":"migration-checkbox",children:void 0===l&&(0,xe.jsx)(G.Z,{sx:{fontSize:"14px",color:"background.paper"},children:(0,xe.jsx)(be.Z,{})})})}),(0,xe.jsxs)(Oe.h,{isRow:!0,maxWidth:250,minWidth:170,children:[(0,xe.jsx)(Ae.T1,{symbol:v.reserve.iconSymbol,fontSize:"large"}),(0,xe.jsxs)(s.Z,{sx:{pl:"12px",overflow:"hidden",display:"flex"},children:[(0,xe.jsx)(H.Z,{variant:"subheader1",color:O,noWrap:!0,sx:{pr:1},children:v.reserve.symbol}),void 0!==l&&(0,xe.jsx)(Ze,{dashboardLink:ye.Z6.dashboard+"/?marketName="+y+"_v3",marketName:Z.marketTitle,warningType:l,isolatedV3:!u})]})]}),(0,xe.jsx)(Oe.h,{children:(0,xe.jsxs)(s.Z,{sx:{display:"flex"},children:[(0,xe.jsx)(je.J,{value:D,symbol:v.reserve.symbol,incentives:A,variant:"main14",color:O}),(0,xe.jsx)(G.Z,{sx:{px:1.5},children:(0,xe.jsx)(ee.Z,{fontSize:"14px",color:void 0===l?j.palette.text.primary:j.palette.text.muted})}),(0,xe.jsx)(je.J,{value:I,symbol:v.reserve.symbol,incentives:P,variant:"main14",color:O})]})}),!!c&&(0,xe.jsx)(Oe.h,{children:(0,xe.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center"},children:[v.usageAsCollateralEnabledOnUser&&"0"!==v.reserve.reserveLiquidationThreshold?(0,xe.jsx)(fe.Z,{fontSize:"small",color:"success"}):(0,xe.jsx)(De.J,{variant:"main14",color:k}),(0,xe.jsx)(G.Z,{sx:{px:1.5},children:(0,xe.jsx)(ee.Z,{fontSize:"14px",color:void 0===l?j.palette.text.primary:j.palette.text.muted})}),M?(0,xe.jsx)(Pe,{enableAsCollateral:c,enabledAsCollateral:a}):a?d?(0,xe.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,xe.jsx)(G.Z,{sx:{color:"warning.main",fontSize:"20px"},children:(0,xe.jsx)(me.Z,{})}),(0,xe.jsx)(Ce.Ch,{})]}):(0,xe.jsx)(fe.Z,{fontSize:"small",color:"success"}):(0,xe.jsx)(De.J,{variant:"main14",color:k})]})}),f&&(S?(0,xe.jsx)(Oe.h,{children:(0,xe.jsx)(De.J,{variant:"main14",color:"text.secondary"})}):(0,xe.jsx)(Oe.h,{children:(0,xe.jsxs)(s.Z,{sx:{display:"flex"},children:[(0,xe.jsx)(Se.B,{value:v.reserve.formattedBaseLTVasCollateral,percent:!0,variant:"secondary14",color:O}),(0,xe.jsx)(G.Z,{sx:{px:1.5},children:(0,xe.jsx)(ee.Z,{fontSize:"14px",color:void 0===l?j.palette.text.primary:j.palette.text.muted})}),(0,xe.jsx)(Se.B,{value:(null===h||void 0===h?void 0:h.ltv)||0,percent:!0,variant:"secondary14",color:O})]})})),!!x&&(0,xe.jsx)(Oe.h,{children:(0,xe.jsxs)(s.Z,{sx:{display:"flex"},children:[(0,xe.jsx)(J.Z,{variant:"outlined",size:"small",sx:{width:"50px",background:"white"},disabled:!0,children:(0,xe.jsx)(H.Z,{variant:"buttonS",color:O,children:x})}),(0,xe.jsx)(G.Z,{sx:{px:1.5},children:(0,xe.jsx)(ee.Z,{fontSize:"14px",color:void 0===l?j.palette.text.primary:j.palette.text.muted})}),(0,xe.jsx)(J.Z,{variant:"outlined",size:"small",sx:{width:"50px",background:"white"},disabled:!0,children:(0,xe.jsx)(H.Z,{variant:"buttonS",color:O,children:"Variable"})})]})}),!f&&(S?(0,xe.jsx)(Oe.h,{children:(0,xe.jsx)(De.J,{variant:"main14",color:"text.secondary"})}):(0,xe.jsx)(Oe.h,{children:(0,xe.jsxs)(s.Z,{sx:{display:"flex"},children:[(0,xe.jsx)(Se.B,{value:v.reserve.formattedReserveLiquidationThreshold,percent:!0,variant:"secondary14",color:O}),(0,xe.jsx)(G.Z,{sx:{px:1.5},children:(0,xe.jsx)(ee.Z,{fontSize:"14px",color:void 0===l?j.palette.text.primary:j.palette.text.muted})}),(0,xe.jsx)(Se.B,{value:null!==(t=null===h||void 0===h?void 0:h.liquidationThreshold)&&void 0!==t?t:-1,percent:!0,variant:"secondary14",color:O})]})})),(0,xe.jsxs)(Oe.h,{children:[(0,xe.jsx)(Se.B,{value:n,variant:"secondary14",color:O}),(0,xe.jsx)(Se.B,{value:i,variant:"secondary12",color:O,symbol:"USD",symbolsColor:O})]})]}),"stETH"===v.reserve.symbol&&(0,xe.jsx)(s.Z,{sx:{pl:"16px",width:"100%"},children:(0,xe.jsx)(Me,{v2Price:v.reserve.priceInUSD,v2Amount:n,v3Price:null===h||void 0===h?void 0:h.priceInUSD})})]})},Ee=function(e){var t=e.selectedBorrowAssets,r=e.userReserve,n=e.toggleSelectedBorrowPosition,i=e.v3Rates,s=e.enteringIsolation,o=(0,l.useMemo)((function(){return!r.migrationDisabled&&t.findIndex((function(e){return r.interestRate==p.tk.Stable?e.debtKey==r.reserve.stableDebtTokenAddress:e.debtKey==r.reserve.variableDebtTokenAddress}))>=0}),[t]),a=r.interestRate==p.tk.Stable?r.stableBorrows:r.variableBorrows,c=r.interestRate==p.tk.Stable?r.stableBorrowsUSD:r.variableBorrowsUSD;return(0,xe.jsx)(Te,{checked:o,userReserve:r,amount:a,amountInUSD:c,onCheckboxClick:function(){n(r)},disabled:r.migrationDisabled,enabledAsCollateral:r.usageAsCollateralEnabledOnUser,borrowApyType:r.interestRate,v3Rates:i,enteringIsolation:s,isSupplyList:!1},r.debtKey)},Re=function(){var e=(0,V.Z)();return(0,z.Z)(e.breakpoints.down(1125))?(0,xe.jsx)(Fe,{}):(0,xe.jsxs)(ke.H,{sx:{pl:0},children:[(0,xe.jsx)(Oe.h,{align:"center",maxWidth:64,minWidth:64,children:(0,xe.jsx)(ce.Z,{width:16,height:16})}),(0,xe.jsx)(Oe.h,{align:"left",isRow:!0,maxWidth:250,minWidth:170,children:(0,xe.jsxs)(s.Z,{sx:{display:"inline-flex",alignItems:"center"},children:[(0,xe.jsx)(ce.Z,{variant:"circular",width:32,height:32}),(0,xe.jsx)(ce.Z,{sx:{ml:3},width:39,height:20})]})}),(0,xe.jsx)(Oe.h,{children:(0,xe.jsx)(ce.Z,{width:120,height:25})}),(0,xe.jsx)(Oe.h,{children:(0,xe.jsx)(ce.Z,{width:120,height:25})}),(0,xe.jsx)(Oe.h,{children:(0,xe.jsx)(ce.Z,{width:120,height:25})}),(0,xe.jsxs)(Oe.h,{children:[(0,xe.jsx)(ce.Z,{width:70,height:16,sx:{mb:1}}),(0,xe.jsx)(ce.Z,{width:50,height:14})]})]})},Fe=function(){return(0,xe.jsxs)(ke.H,{sx:{display:"flex",flexDirection:"column",pl:0},children:[(0,xe.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",width:"100%",pb:2,pt:2.5},children:[(0,xe.jsx)(Oe.h,{align:"center",maxWidth:48,minWidth:48,children:(0,xe.jsx)(ce.Z,{width:16,height:16})}),(0,xe.jsx)(Oe.h,{align:"left",children:(0,xe.jsxs)(s.Z,{sx:{display:"inline-flex",alignItems:"center"},children:[(0,xe.jsx)(ce.Z,{variant:"circular",width:32,height:32}),(0,xe.jsx)(ce.Z,{sx:{ml:3},width:39,height:20})]})})]}),(0,xe.jsxs)(s.Z,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:2,pb:4,pl:12},children:[(0,xe.jsxs)(s.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,xe.jsx)(ce.Z,{width:130,height:16}),(0,xe.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:1},children:[(0,xe.jsx)(ce.Z,{width:50,height:16}),(0,xe.jsx)(ce.Z,{width:30,height:14})]})]}),(0,xe.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,xe.jsx)(ce.Z,{width:80,height:16}),(0,xe.jsx)(ce.Z,{width:115,height:16})]}),(0,xe.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,xe.jsx)(ce.Z,{width:115,height:16}),(0,xe.jsx)(ce.Z,{width:150,height:16})]}),(0,xe.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,xe.jsx)(ce.Z,{width:140,height:16}),(0,xe.jsx)(ce.Z,{width:115,height:16})]})]})]})},Ne=r(99435),Ue=r(1475),_e=r(45556),Le=r(32374);function Ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var We=function(e){var t=e.numSelected,r=e.allSelected,n=e.onSelectAllClick,i=e.disabled,o=(0,V.Z)(),a={border:"2px solid ".concat(o.palette.text.secondary),background:o.palette.text.secondary,width:16,height:16,borderRadius:"2px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"};return i?(0,xe.jsx)(Ne.M,{children:(0,xe.jsx)(s.Z,{sx:ze(ze({},a),{},{background:o.palette.action.disabledBackground,border:"2px solid ".concat(o.palette.action.disabled),"&:hover":{cursor:"not-allowed"}})})}):(0,xe.jsx)(Ne.M,{onClick:n,children:r?(0,xe.jsx)(s.Z,{sx:a,"data-cy":"migration-checkbox-all",children:(0,xe.jsx)(G.Z,{sx:{fontSize:"14px",color:"background.paper"},children:(0,xe.jsx)(be.Z,{})})}):0!==t?(0,xe.jsx)(s.Z,{sx:a,"data-cy":"migration-checkbox-all",children:(0,xe.jsx)(G.Z,{sx:{fontSize:"16px",color:"background.paper"},children:(0,xe.jsx)(Le.Z,{})})}):(0,xe.jsx)(s.Z,{sx:ze(ze({},a),{},{background:"white"}),"data-cy":"migration-checkbox-all"})})},Ye=function(e){var t=e.titleComponent,r=e.children,n=e.onSelectAllClick,o=e.loading,a=e.isAvailable,l=e.allSelected,c=e.numSelected,d=e.numAvailable,u=e.disabled;return(0,xe.jsx)(s.Z,{sx:{width:"100%"},children:(0,xe.jsxs)(_e.l,{titleComponent:(0,xe.jsx)(H.Z,{component:"div",variant:"h3",sx:{mr:4},children:t}),children:[(a||o)&&(0,xe.jsxs)(Ue.u,{sx:{pl:0},children:[(0,xe.jsx)(Oe.h,{align:"center",maxWidth:48,minWidth:48,children:(0,xe.jsx)(We,{allSelected:l,numSelected:c,onSelectAllClick:n,disabled:u})}),(0,xe.jsx)(s.Z,{sx:{height:22,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,xe.jsx)(H.Z,{variant:"subheader2",color:"text.secondary",children:(0,xe.jsx)(i.cC,{id:"{numSelected}/{numAvailable} assets selected",values:{numSelected:c,numAvailable:d}})})})]}),r]})})},qe=[{title:(0,xe.jsx)(i.cC,{id:"APY change"})},{title:(0,xe.jsx)(i.cC,{id:"Collateral change"})},{title:(0,xe.jsx)(i.cC,{id:"Max LTV"})},{title:(0,xe.jsx)(i.cC,{id:"Current v2 balance"})}],He=[{title:(0,xe.jsx)(i.cC,{id:"APY change"})},{title:(0,xe.jsx)(i.cC,{id:"APY type change"})},{title:(0,xe.jsx)(i.cC,{id:"Liquidation Threshold"})},{title:(0,xe.jsx)(i.cC,{id:"Current v2 balance"})}],Je=function(e){var t=e.titleComponent,r=e.children,n=e.onSelectAllClick,o=e.loading,a=e.isAvailable,l=e.withCollateral,c=e.withBorrow,d=e.allSelected,u=e.numSelected,x=e.numAvailable,p=e.disabled,v=e.isolatedReserveV3,h=(0,V.Z)(),m=(0,w.Y)(),b=m.currentMarket,f=m.currentMarketData.marketTitle,j=ye.Z6.dashboard+"/?marketName="+b+"_v3";return(0,z.Z)(h.breakpoints.down(1125))?(0,xe.jsx)(Ye,{titleComponent:t,onSelectAllClick:n,loading:o,isAvailable:a,allSelected:d,numSelected:u,disabled:p,numAvailable:x,children:r}):(0,xe.jsx)(s.Z,{sx:{width:"100%"},children:(0,xe.jsxs)(_e.l,{paperSx:{border:0,boxShadow:"none"},titleComponent:(0,xe.jsxs)(s.Z,{display:"block",children:[(0,xe.jsx)(H.Z,{component:"div",variant:"subheader2",sx:{mr:4},children:t}),v&&!v.enteringIsolationMode&&(0,xe.jsx)(s.Z,{sx:{pt:"16px"},children:(0,xe.jsx)(X.v,{severity:"warning",icon:!1,sx:{mb:0},children:(0,xe.jsx)(H.Z,{variant:"caption",color:h.palette.warning[100],children:(0,xe.jsx)(i.cC,{id:"Some migrated assets will not be used as collateral due to enabled isolation mode in {marketName} V3 Market. Visit <0>{marketName} V3 Dashboard</0> to manage isolation mode.",values:{marketName:f},components:{0:(0,xe.jsx)(ye.rU,{href:j})}})})})})]}),children:[(a||o)&&(0,xe.jsxs)(Ue.u,{sx:{pl:0},children:[(0,xe.jsx)(Oe.h,{align:"center",maxWidth:64,minWidth:64,children:(0,xe.jsx)(We,{allSelected:d,numSelected:u,onSelectAllClick:n,disabled:p})}),(0,xe.jsx)(Oe.h,{isRow:!0,maxWidth:250,minWidth:170,children:(0,xe.jsx)(Ne.M,{children:(0,xe.jsx)(i.cC,{id:"Assets"})})}),l&&qe.map((function(e,t){return(0,xe.jsx)(Oe.h,{children:(0,xe.jsx)(Ne.M,{children:e.title})},t)})),c&&He.map((function(e,t){return(0,xe.jsx)(Oe.h,{children:(0,xe.jsx)(Ne.M,{children:e.title})},t)}))]}),r]})})},Ge=function(e){var t=e.onSelectAllSupplies,r=e.onSelectAllBorrows,n=e.suppliesPositions,s=e.borrowsPositions,o=e.loading,a=e.isolatedReserveV3,l=e.isSupplyPositionsAvailable,c=e.isBorrowPositionsAvailable,d=e.emodeCategoryId,u=e.supplyReserves,x=e.borrowReserves,p=(0,w.Y)(),v=p.selectedMigrationSupplyAssets,h=p.selectedMigrationBorrowAssets,m=void 0===u.find((function(e){return void 0===e.migrationDisabled})),b=void 0===x.find((function(e){return void 0===e.migrationDisabled})),f=(0,Z.FW)(u,v),j=f.activeSelections,g=f.activeUnselected,y=(0,Z.FW)(x,h),C=y.activeSelections,O=y.activeUnselected;return(0,xe.jsxs)(W.Z,{sx:{display:"flex",flexDirection:"column",gap:2,width:"100%"},children:[(0,xe.jsx)(H.Z,{variant:"h3",sx:{p:{xs:"16px 24px 0 24px"},display:{xs:"none",lg:"block"}},children:"Assets to migrate"}),(0,xe.jsx)(Je,{isolatedReserveV3:a,loading:o,onSelectAllClick:t,allSelected:0===g.length,isAvailable:l,titleComponent:(0,xe.jsx)(i.cC,{id:"Supplied assets"}),emodeCategoryId:d,withCollateral:!0,disabled:m,numSelected:j.length||0,numAvailable:u.length||0,children:n}),(0,xe.jsx)(Je,{loading:o,onSelectAllClick:r,allSelected:0===O.length,isAvailable:c,withBorrow:!0,disabled:b,titleComponent:(0,xe.jsx)(i.cC,{id:"Borrowed assets"}),numSelected:C.length||0,numAvailable:x.length||0,children:s})]})},Ke=r(96471),Xe=r(74815),Qe=function(){var e=(0,a.useRouter)(),t=(0,V.Z)(),r=(0,z.Z)(t.breakpoints.down("sm"));return(0,xe.jsx)(Xe.f,{titleComponent:(0,xe.jsx)(s.Z,{children:(0,xe.jsx)(s.Z,{sx:{display:"flex",alignItems:r?"flex-start":"center",alignSelf:r?"flex-start":"center",mb:4,minHeight:"40px",flexDirection:r?"column":"row"},children:(0,xe.jsx)(J.Z,{variant:"surface",size:"medium",color:"primary",startIcon:(0,xe.jsx)(G.Z,{sx:{fontSize:"20px"},children:(0,xe.jsx)(Ke.Z,{})}),onClick:function(){e.push(ye.Z6.dashboard)},sx:{mr:3,mb:r?"24px":"0"},"data-cy":"goBack-btn",children:(0,xe.jsx)(i.cC,{id:"Go Back"})})})})})};function $e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var et=(0,o.default)((function(){return Promise.all([r.e(1865),r.e(7399)]).then(r.bind(r,99528)).then((function(e){return e.MigrateV3Modal}))}),{loadableGenerated:{webpack:function(){return[99528]}}}),tt=Object.keys(ue.ei).map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},ue.ei[e])})).filter((function(e){return e.addresses.V3_MIGRATOR})),rt=[{title:"Aave V2 Markets",markets:tt}];function nt(){var e=(0,N.Z)(),t=e.currentAccount,r=e.loading,n=(0,a.useRouter)(),o=(0,l.useState)((function(){if(n.query.market){var e=(0,u.hu)(n.query.market).market;if(tt.find((function(t){return t.isFork===e.isFork&&t.chainId===e.chainId})))return e}return tt[0]})),p=o[0],v=o[1],h=(0,w.Y)(),m=h.selectAllSupply,b=h.selectAllBorrow,f=h.toggleMigrationSelectedSupplyAsset,j=h.selectedMigrationSupplyAssets,g=h.toggleMigrationSelectedBorrowAsset,Z=h.selectedMigrationBorrowAssets,k=h.resetMigrationSelectedAssets,S=h.enforceAsCollateral,A=(0,y.xI)(p.chainId,(0,ue.Mo)(p.chainId)),M=(0,x.C)(p,A),B=M.data,T=M.isLoading,F=(null===B||void 0===B?void 0:B.supplyReserves)||[],_=(null===B||void 0===B?void 0:B.borrowReserves)||[],L=null===B||void 0===B?void 0:B.isolatedReserveV3,V=(0,R.g)(p),z=V.data,W=V.isLoading,Y=(0,D.T)(A),q=Y.data,H=Y.isLoading,J=(0,R.g)(A),G=J.data,K=J.isLoading,X=(null===q||void 0===q?void 0:q.userEmodeCategoryId)||0,Q=function(e,t){var r,n=(0,x.C)(e,t),i=(0,P.D)(t),s=I(e),o=I(t),a=(0,O.p)(e,t,null===(r=n.data)||void 0===r?void 0:r.supplyReserves),l=(0,w.Y)((function(e){return e.selectedMigrationBorrowAssets})),c=(0,w.Y)((function(e){return e.selectedMigrationSupplyAssets}));return(0,C.W)([n,s,o,i,a],(function(e,t,r,n,i){return E(e,t,r,n,c,l,i)}))}(p,A),$=Q.data,ee=Q.isLoading,te=T||W||H||K||ee;(0,l.useEffect)((function(){k&&k()}),[k]);var re=j.length>1&&G&&"0"==G.totalCollateralMarketReferenceCurrency,ne=z&&G&&{fromUserSummaryBeforeMigration:z,toUserSummaryBeforeMigration:G};return(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(Qe,{}),t?(0,xe.jsx)(d.O,{children:(0,xe.jsxs)(s.Z,{sx:{display:"flex",gap:4,alignItems:"start",flexDirection:{xs:"column",lg:"row"}},children:[(0,xe.jsx)(he,{userSummaryAfterMigration:$,userSummaryBeforeMigration:ne,disableButton:0===j.length&&0===Z.length,enteringIsolationMode:(null===L||void 0===L?void 0:L.enteringIsolationMode)||!1,loading:te,fromMarketData:p,toMarketData:A,setFromMarketData:function(e){k(),v(e)},selectableMarkets:rt}),(0,xe.jsx)(Ge,{loading:te,isSupplyPositionsAvailable:F.length>0,isBorrowPositionsAvailable:_.length>0,onSelectAllSupplies:function(){m(F)},onSelectAllBorrows:function(){b(_)},emodeCategoryId:X,isolatedReserveV3:L,supplyReserves:F,borrowReserves:_,suppliesPositions:(0,xe.jsx)(xe.Fragment,{children:te?(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(Re,{}),(0,xe.jsx)(Re,{})]}):F.length>0?F.map((function(e){return(0,xe.jsx)(Te,{checked:j.findIndex((function(t){return t.underlyingAsset==e.underlyingAsset}))>=0,enableAsCollateral:function(){return t=e.canBeEnforced,r=e.underlyingAsset,void(t&&S(r));var t,r},userControlledCollateral:re,canBeEnforced:G&&"0"==G.totalCollateralMarketReferenceCurrency&&e.canBeEnforced,userReserve:e,amount:e.underlyingBalance,amountInUSD:e.underlyingBalanceUSD,onCheckboxClick:function(){f(e.underlyingAsset)},enabledAsCollateral:e.usageAsCollateralEnabledOnUserV3,isIsolated:e.isolatedOnV3,enteringIsolation:(null===L||void 0===L?void 0:L.enteringIsolationMode)||!1,v3Rates:e.v3Rates,disabled:e.migrationDisabled,isSupplyList:!0},e.underlyingAsset)})):(0,xe.jsx)(s.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,xe.jsx)(U.N,{text:(0,xe.jsx)(i.cC,{id:"Nothing supplied yet"})})})}),borrowsPositions:(0,xe.jsx)(xe.Fragment,{children:te?(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(Re,{}),(0,xe.jsx)(Re,{})]}):_.length>0?_.map((function(e){return(0,xe.jsx)(Ee,{userReserve:e,selectedBorrowAssets:Z,toggleSelectedBorrowPosition:g,v3Rates:e.v3Rates,enteringIsolation:(null===L||void 0===L?void 0:L.enteringIsolationMode)||!1},e.debtKey)})):(0,xe.jsx)(s.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,xe.jsx)(U.N,{text:(0,xe.jsx)(i.cC,{id:"Nothing borrowed yet"})})})})})]})}):(0,xe.jsx)(c.w,{loading:r,description:(0,xe.jsx)(i.cC,{id:"Please connect your wallet to see migration tool."})})]})}nt.getLayout=function(e){return(0,xe.jsxs)(F.Z,{children:[e,(0,xe.jsx)(et,{})]})}},96875:function(e,t,r){"use strict";r.d(t,{o:function(){return b}});var n=r(59499),i=r(4730),s=r(49501),o=r(1279),a=r(62097),l=r(61953),c=r(29630),d=r(75084),u=r(70794),x=r(41024),p=r(85893),v=["value","onInfoClick"];function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b=function(e){var t=e.value,r=e.onInfoClick,n=(0,i.Z)(e,v),h=(0,a.Z)().palette,b=Number((0,o.hE)(t).toFixed(2,u.Z.ROUND_DOWN)),f="";return f=b>=3?h.success.main:b<1.1?h.error.main:h.warning.main,(0,p.jsxs)(l.Z,{sx:{display:"inline-flex",alignItems:{xs:"flex-start",xsm:"center"},flexDirection:{xs:"column",xsm:"row"}},"data-cy":"HealthFactorTopPannel",children:["-1"===t?(0,p.jsx)(c.Z,{variant:"secondary14",color:h.success.main,children:"\u221e"}):(0,p.jsx)(x.B,m({value:b,sx:m({color:f},n.sx),visibleDecimals:2,compact:!0},n)),r&&(0,p.jsx)(d.Z,{onClick:r,variant:"surface",size:"small",sx:{minWidth:"unset",ml:{xs:0,xsm:2}},children:(0,p.jsx)(s.cC,{id:"Risk details"})})]})}},52906:function(e,t,r){"use strict";r.d(t,{J:function(){return l}});var n=r(61953),i=r(41024),s=r(14463),o=r(48331),a=r(85893),l=function(e){var t=e.symbol,r=e.value,l=e.incentives,c=e.variant,d=void 0===c?"secondary14":c,u=e.symbolsVariant,x=e.align,p=e.color,v=e.tooltip;return(0,a.jsxs)(n.Z,{sx:{display:"flex",flexDirection:"column",alignItems:x||{xs:"flex-end",xsm:"center"},justifyContent:"center",textAlign:"center"},children:["-1"!==r.toString()?(0,a.jsxs)(n.Z,{sx:{display:"flex"},children:[(0,a.jsx)(i.B,{"data-cy":"apy",value:r,percent:!0,variant:d,symbolsVariant:u,color:p,symbolsColor:p}),v]}):(0,a.jsx)(s.J,{variant:d,color:p||"text.secondary"}),(0,a.jsx)(o.MB,{incentives:l,symbol:t})]})}},44749:function(e,t,r){"use strict";r.d(t,{Ch:function(){return b},r$:function(){return f},a9:function(){return j}});var n=r(59499),i=r(49501),s=r(38264),o=r(81645),a=r(62097),l=r(61953),c=r(29630),d=r(68346),u=r(91874),x=r(85893);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h={borderRadius:"4px",display:"inline-flex",alignItems:"center",p:"2px",mt:"2px",cursor:"pointer","&:hover":{opacity:.6}},m=function(e){var t=e.color;return(0,x.jsx)(o.Z,{sx:{ml:"3px",color:t||"text.muted",fontSize:"14px"},children:(0,x.jsx)(s.Z,{})})},b=function(e){var t=e.typographyProps,r=(0,a.Z)(),n=v({border:"1px solid ".concat(r.palette.warning.main),color:r.palette.warning.main},h);return(0,x.jsx)(u.a,{withoutHover:!0,tooltipContent:(0,x.jsx)(g,{content:(0,x.jsx)(i.cC,{id:"Isolated assets have limited borrowing power and other assets cannot be used as collateral."})}),children:(0,x.jsxs)(l.Z,{sx:n,children:[(0,x.jsx)(c.Z,v(v({variant:"secondary12",sx:{lineHeight:"0.75rem"},color:r.palette.warning.main},t),{},{children:(0,x.jsx)(i.cC,{id:"Isolated"})})),(0,x.jsx)(m,{color:r.palette.warning.main})]})})},f=function(){return(0,x.jsx)(u.a,{tooltipContent:(0,x.jsx)(g,{content:(0,x.jsx)(i.cC,{id:"Asset can be only used as collateral in isolation mode with limited borrowing power. To enter isolation mode, disable all other collateral."})}),children:(0,x.jsxs)(l.Z,{sx:h,children:[(0,x.jsx)(c.Z,{variant:"description",color:"error.main",children:(0,x.jsx)(i.cC,{id:"Unavailable"})}),(0,x.jsx)(m,{})]})})},j=function(){return(0,x.jsx)(u.a,{tooltipContent:(0,x.jsx)(g,{content:(0,x.jsx)(i.cC,{id:"Collateral usage is limited because of isolation mode."})}),children:(0,x.jsxs)(l.Z,{sx:h,children:[(0,x.jsx)(c.Z,{variant:"description",color:"error.main",children:(0,x.jsx)(i.cC,{id:"Unavailable"})}),(0,x.jsx)(m,{})]})})},g=function(e){var t=e.content;return(0,x.jsxs)(l.Z,{children:[(0,x.jsx)(l.Z,{sx:{mb:4},children:t}),(0,x.jsx)(c.Z,{variant:"subheader2",color:"text.secondary",children:(0,x.jsx)(i.cC,{id:"Learn more in our <0>FAQ guide</0>",components:{0:(0,x.jsx)(d.Z,{href:"https://docs.aave.com/faq/aave-v3-features#isolation-mode",fontWeight:500})}})})]})}},99435:function(e,t,r){"use strict";r.d(t,{M:function(){return l}});var n=r(29630),i=r(61953),s=r(78371),o=r(57609),a=r(85893),l=function(e){var t=e.sortName,r=e.sortDesc,l=e.sortKey,c=e.source,d=e.setSortName,u=e.setSortDesc,x=e.onClick,p=e.children,v=(0,s.Y)((function(e){return e.trackEvent}));return(0,a.jsxs)(n.Z,{component:"div",variant:"subheader2",color:"text.secondary",noWrap:!0,onClick:function(){return x?x():!!l&&(e=l,v(o.uZ.SORT,{sort_by:e,tile:c}),u&&u(!1),d&&d(e),void(t===e&&u&&u(!r)));var e},sx:{cursor:x||l?"pointer":"default",display:"inline-flex",alignItems:"center"},children:[p,!!l&&(0,a.jsxs)(i.Z,{sx:{display:"inline-flex",flexDirection:"column",ml:1},children:[(0,a.jsx)(i.Z,{component:"span",sx:function(e){return{width:0,height:0,borderStyle:"solid",borderWidth:"0 4px 4px 4px",borderColor:"transparent transparent ".concat(t===l&&r?e.palette.text.secondary:e.palette.divider," transparent"),mb:.5}}}),(0,a.jsx)(i.Z,{component:"span",sx:function(e){return{width:0,height:0,borderStyle:"solid",borderWidth:"4px 4px 0 4px",borderColor:"".concat(t!==l||r?e.palette.divider:e.palette.text.secondary," transparent transparent transparent")}}})]})]})}},1475:function(e,t,r){"use strict";r.d(t,{u:function(){return d}});var n=r(59499),i=r(4730),s=r(61953),o=r(85893),a=["px","children"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=function(e){var t=e.px,r=void 0===t?4:t,n=e.children,l=(0,i.Z)(e,a);return(0,o.jsx)(s.Z,c(c({},l),{},{sx:c({display:"flex",alignItems:"flex-end",px:r,pt:4,pb:1,position:"sticky",top:0,zIndex:100,bgcolor:"background.paper",borderBottom:"1px solid",borderColor:"divider"},l.sx),children:n}))}},41024:function(e,t,r){"use strict";r.d(t,{J:function(){return x},B:function(){return v}});var n=r(59499),i=r(4730),s=r(1279),o=r(29630),a=r(85893),l=["value","symbol","visibleDecimals","compact","percent","symbolsVariant","symbolsColor","roundDown","compactThreshold"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u=["","K","M","B","T","P","E","Z","Y"],x=function(e){var t=e.value,r=e.visibleDecimals,n=void 0===r?2:r,i=e.roundDown,o=e.compactThreshold,a=(0,s.hE)(t),l=a.toFixed(0).length;o&&Number(t)<=o&&(l=0);var c=Math.min(Math.floor(l?(l-1)/3:0),u.length-1),d=u[c],x=(0,s.pV)(a,3*c).toNumber();return i&&(x=Math.trunc(Number(x)*Math.pow(10,n))/Math.pow(10,n)),{prefix:new Intl.NumberFormat("en-US",{maximumFractionDigits:n,minimumFractionDigits:n}).format(x),postfix:d}};function p(e){var t=e.value,r=e.visibleDecimals,n=e.roundDown,i=x({value:t,visibleDecimals:r,roundDown:n}),s=i.prefix,o=i.postfix;return(0,a.jsxs)(a.Fragment,{children:[s,o]})}function v(e){var t=e.value,r=e.symbol,n=e.visibleDecimals,s=e.compact,c=e.percent,u=e.symbolsVariant,x=e.symbolsColor,v=e.roundDown,h=e.compactThreshold,m=(0,i.Z)(e,l),b=c?100*Number(t):Number(t),f=null!==n&&void 0!==n?n:0;0===b?f=0:void 0===n&&(f=b>1||c||"USD"===r?2:7);var j=Math.pow(10,-f),g=0!==b&&Math.abs(b)<Math.abs(j),y=g?j:b,w=!1!==s&&(s||b>99999);return v&&!w&&(y=Math.trunc(Number(y)*Math.pow(10,f))/Math.pow(10,f)),(0,a.jsxs)(o.Z,d(d({},m),{},{sx:d({display:"inline-flex",flexDirection:"row",alignItems:"center",position:"relative"},m.sx),noWrap:!0,children:[g&&(0,a.jsx)(o.Z,{component:"span",sx:{mr:.5},variant:u||m.variant,color:x||"text.secondary",children:"<"}),"usd"===(null===r||void 0===r?void 0:r.toLowerCase())&&!c&&(0,a.jsx)(o.Z,{component:"span",sx:{mr:.5},variant:u||m.variant,color:x||"text.secondary",children:"$"}),w?(0,a.jsx)(p,{value:y,visibleDecimals:f,roundDown:v,compactThreshold:h}):new Intl.NumberFormat("en-US",{maximumFractionDigits:f,minimumFractionDigits:f}).format(y),c&&(0,a.jsx)(o.Z,{component:"span",sx:{ml:.5},variant:u||m.variant,color:x||"text.secondary",children:"%"}),"usd"!==(null===r||void 0===r?void 0:r.toLowerCase())&&"undefined"!==typeof r&&(0,a.jsx)(o.Z,{component:"span",sx:{ml:.5},variant:u||m.variant,color:x||"text.secondary",children:r})]}))}},14463:function(e,t,r){"use strict";r.d(t,{J:function(){return l}});var n=r(59499),i=r(29630),s=(r(67294),r(85893));function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l=function(e){return(0,s.jsx)(i.Z,a(a({},e),{},{children:"\u2014"}))}},72667:function(e,t,r){"use strict";r.d(t,{Js:function(){return f},UD:function(){return y},T1:function(){return Z}});var n=r(83618),i=r(59499),s=r(4730),o=r(89722),a=r(61953),l=r(60082),c=r(67294),d=r(25043),u=r(85893),x=["symbol","aToken"],p=["symbol","logoURI"],v=["symbols","badgeSymbol"],h=["symbol"];function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e){var t=e.symbol,r=e.onImageGenerated,n=e.aToken,i=(0,c.useRef)(null),s=(0,c.useRef)(null),o=(0,c.useState)(!0),a=o[0],l=o[1];return(0,c.useEffect)((function(){var e;if(!a&&i.current&&null!==(e=i.current)&&void 0!==e&&e.contentDocument)if(n){var t,o,l,c,d=null===(t=i.current)||void 0===t||null===(o=t.contentDocument)||void 0===o||null===(l=o.childNodes)||void 0===l?void 0:l[0],u=d.getAttribute("width"),x=d.getAttribute("height"),p=d.getAttribute("viewBox");d.setAttribute("x",25),d.setAttribute("width",206),d.setAttribute("y",25),d.setAttribute("height",206),p||d.setAttribute("viewBox","0 0 ".concat(u," ").concat(x)),null===(c=s.current)||void 0===c||c.appendChild(d);var v=(new XMLSerializer).serializeToString(s.current);r("data:image/svg+xml;base64,".concat(window.btoa(unescape(encodeURIComponent(v)))))}else{var h,m=(new XMLSerializer).serializeToString(null===(h=i.current)||void 0===h?void 0:h.contentDocument);r("data:image/svg+xml;base64,".concat(window.btoa(unescape(encodeURIComponent(m)))))}}),[a,n]),(0,u.jsxs)("div",{style:{visibility:"hidden",height:0,width:0,overflow:"hidden"},children:[(0,u.jsx)("object",{style:{opacity:1},ref:i,id:"svg",data:"/icons/tokens/".concat(t.toLowerCase(),".svg"),onLoad:function(){return l(!1)}}),n&&(0,u.jsx)(j,{ref:s})]})}var j=(0,c.forwardRef)((function(e,t){var r=e.symbol;return(0,u.jsxs)("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},ref:t,id:"Group_30952",width:"256",height:"256",viewBox:"0 0 256 256",children:[(0,u.jsxs)("defs",{id:"defs10",children:[(0,u.jsxs)("linearGradient",{id:"linear-gradient",x1:".843",x2:".206",y1:".135",y2:".886",gradientUnits:"objectBoundingBox",children:[(0,u.jsx)("stop",{offset:"0",stopColor:"#b6509e",id:"stop2"}),(0,u.jsx)("stop",{offset:"1",stopColor:"#2ebac6",id:"stop4"})]}),(0,u.jsx)("linearGradient",{id:"linear-gradient-2",x1:".907",x2:".163",y1:".227",y2:".853"})]}),(0,u.jsxs)("g",{id:"Group_29109",children:[(0,u.jsx)("path",{id:"Subtraction_108",fill:"url(#linear-gradient)",d:"M128 256a128.976 128.976 0 0 1-25.8-2.6 127.309 127.309 0 0 1-45.77-19.261 128.366 128.366 0 0 1-46.375-56.315A127.357 127.357 0 0 1 2.6 153.8a129.251 129.251 0 0 1 0-51.593 127.31 127.31 0 0 1 19.26-45.77 128.372 128.372 0 0 1 56.317-46.378A127.33 127.33 0 0 1 102.2 2.6a129.244 129.244 0 0 1 51.593 0 127.308 127.308 0 0 1 45.77 19.26 128.367 128.367 0 0 1 46.375 56.316A127.343 127.343 0 0 1 253.4 102.2a129.248 129.248 0 0 1 0 51.593 127.3 127.3 0 0 1-19.26 45.77 128.382 128.382 0 0 1-56.316 46.375A127.4 127.4 0 0 1 153.8 253.4 128.977 128.977 0 0 1 128 256zm0-242.287a115.145 115.145 0 0 0-23.033 2.322A113.657 113.657 0 0 0 64.1 33.232a114.622 114.622 0 0 0-41.4 50.283 113.7 113.7 0 0 0-6.659 21.452 115.4 115.4 0 0 0 0 46.065 113.66 113.66 0 0 0 17.2 40.866 114.627 114.627 0 0 0 50.282 41.407 113.75 113.75 0 0 0 21.453 6.658 115.381 115.381 0 0 0 46.065 0 113.609 113.609 0 0 0 40.866-17.2 114.622 114.622 0 0 0 41.393-50.278 113.741 113.741 0 0 0 6.659-21.453 115.4 115.4 0 0 0 0-46.065 113.662 113.662 0 0 0-17.2-40.865A114.619 114.619 0 0 0 172.485 22.7a113.74 113.74 0 0 0-21.453-6.659A115.145 115.145 0 0 0 128 13.714z"}),r&&(0,u.jsx)("image",{x:"25",y:"25",href:"/icons/tokens/".concat(r.toLowerCase(),".svg"),width:"206",height:"206"})]})]})}));function g(e){var t=e.symbol,r=e.aToken,n=(0,s.Z)(e,x),i=(0,c.useState)(t.toLowerCase()),a=i[0],l=i[1];return(0,c.useEffect)((function(){l(t.toLowerCase())}),[t]),(0,u.jsx)(o.Z,b(b({},n),{},{sx:b({display:"flex",position:"relative",borderRadius:"50%"},n.sx),children:r?(0,u.jsx)(j,{symbol:a}):(0,u.jsx)("img",{src:"/icons/tokens/".concat(a,".svg"),onError:function(){return l("default")},width:"100%",height:"100%",alt:"".concat(t," icon")})}))}function y(e){var t=e.symbol,r=e.logoURI,n=(0,s.Z)(e,p),i=(0,c.useState)(t.toLowerCase()),a=i[0],l=i[1];return(0,u.jsx)(o.Z,b(b({},n),{},{sx:b({display:"flex",position:"relative",borderRadius:"50%"},n.sx),children:(0,u.jsx)(d.Z,{children:(0,u.jsx)("img",{src:"default"!==a&&r?r:"/icons/tokens/default.svg",width:"100%",height:"100%",alt:"".concat(t," icon"),onError:function(){return l("default")}})})}))}function w(e){var t=e.symbols,r=e.badgeSymbol,n=(0,s.Z)(e,v);return r?(0,u.jsx)(l.Z,{badgeContent:(0,u.jsx)(g,{symbol:r,sx:{border:"1px solid #fff"},fontSize:"small"}),sx:{".MuiBadge-anchorOriginTopRight":{top:9}},children:t.map((function(e,t){return(0,c.createElement)(g,b(b({},n),{},{key:e,symbol:e,sx:b({ml:0===t?0:"calc(-1 * 0.5em)"},n.sx)}))}))}):(0,u.jsx)(a.Z,{sx:{display:"inline-flex",position:"relative"},children:t.map((function(e,t){return(0,c.createElement)(g,b(b({},n),{},{key:e,symbol:e,sx:b({ml:0===t?0:"calc(-1 * 0.5em)"},n.sx)}))}))})}function Z(e){var t=e.symbol,r=(0,s.Z)(e,h),i=t.split("_");if(i.length>1){var o=(0,n.Z)(i),a=o[0],l=o.slice(1);return(0,u.jsx)(w,b(b({},r),{},{symbols:l,badgeSymbol:"/pools/"+a}))}return(0,u.jsx)(g,b({symbol:t},r))}j.displayName="ATokenIcon"},18384:function(e,t,r){"use strict";r.d(t,{i:function(){return l}});var n=r(49501),i=r(29630),s=r(68861),o=r(69331),a=r(85893),l=function(e){var t=e.asset,r=e.severity;return(0,a.jsxs)(o.v,{severity:r||"info",sx:{mb:3},children:[(0,a.jsx)(i.Z,{variant:"subheader1",mb:.5,children:(0,a.jsx)(n.cC,{id:"You are entering Isolation mode"})}),(0,a.jsx)(i.Z,{children:(0,a.jsx)(n.cC,{id:"In Isolation mode, you cannot supply other assets as collateral. A global debt ceiling limits the borrowing power of the isolated asset. To exit isolation mode disable {0} as collateral before borrowing another asset. Read more in our <0>FAQ</0>",values:{0:t||""},components:{0:(0,a.jsx)(s.rU,{href:"https://docs.aave.com/faq/aave-v3-features#isolation-mode"})}})})]})}},63263:function(e,t,r){"use strict";r.d(t,{p:function(){return a}});var n=r(36492),i=r(31001),s=r(5991),o=r(38776),a=function(e,t,r){var a=(0,s.z)().migrationService;return(0,n.a)({queryKey:i.B.migrationExceptions(r||[],e,t),queryFn:function(){return(0,o.Z)(r,"Supply exceptions are required"),a.getMigrationExceptionSupplyBalances(r,e,t)},enabled:!!r})}},15070:function(e,t,r){"use strict";r.d(t,{C:function(){return C}});var n=r(59499),i=r(4730),s=r(80854),o=r(1279),a=r(27484),l=r.n(a),c=r(42568),d=r.n(c),u=r(78371),x=r(67728),p=r(52369),v=r(37197),h=r(45104),m=r(55774),b=r(25957),f=r(63263),j=["userReservesData"],g=["userReservesData"];function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Z=d()((function(e,t,r,n,a,c){var d=(0,x.qt)(e.reservesData,r,t.userReserves,e.baseCurrencyData,l()().unix(),t.userEmodeCategoryId),u=d.userReservesData,p=(0,i.Z)(d,j),v=n.userReservesData,h=(0,i.Z)(n,g),m=t.userEmodeCategoryId,b=(0,x.IM)(p),f=(0,x.NK)(u);if("0"==p.totalCollateralMarketReferenceCurrency){var y=(0,x.Cz)(c,a,f);if(y.length>0){var Z=(0,x.HX)(a,y[0]),C=f[Z];"0"!==C.reserve.reserveLiquidationThreshold&&C.reserve.isIsolated&&(b=w(w({},C.reserve),{},{enteringIsolationMode:!0}))}}var O=v.filter((function(e){return"0"!==e.underlyingBalance})),k=(0,x.GZ)(v),S=O.map((function(e){var t,r,n,i,s=!0,l=(0,x.HX)(a,e),c=null===(t=f[l])||void 0===t?void 0:t.reserve.isIsolated,d="0"==(null===(r=f[l])||void 0===r?void 0:r.underlyingBalance),u=f[l];if(u){var p=(0,o.hE)(u.reserve.supplyCap).minus(u.reserve.totalLiquidity),v=u.reserve.formattedBaseLTVasCollateral;0!==m&&u.reserve.eModeCategoryId!==m&&(v=u.reserve.formattedEModeLtv),i={stableBorrowAPY:u.stableBorrowAPY,variableBorrowAPY:u.reserve.variableBorrowAPY,supplyAPY:u.reserve.supplyAPY,aIncentivesData:u.reserve.aIncentivesData,vIncentivesData:u.reserve.vIncentivesData,sIncentivesData:u.reserve.sIncentivesData,priceInUSD:u.reserve.priceInUSD,ltv:v},u.reserve.isFrozen?n=x.b_.ReserveFrozen:p.isGreaterThan(e.underlyingBalance)||(n=x.b_.NotEnoughtSupplies)}else n=x.b_.V3AssetMissing;return s=b?e.underlyingAsset==b.underlyingAsset:"0"!==(null===u||void 0===u?void 0:u.underlyingBalance)?null===u||void 0===u?void 0:u.usageAsCollateralEnabledOnUser:!c,w(w({},e),{},{usageAsCollateralEnabledOnUserV3:s,isolatedOnV3:c,canBeEnforced:d,migrationDisabled:n,v3Rates:i})})),D=k.map((function(e){var t,r,n,i=null===(t=f[e.underlyingAsset])||void 0===t?void 0:t.reserve;b&&!i.borrowableInIsolation&&(r=x.b_.IsolationModeBorrowDisabled);var a=f[e.underlyingAsset];if(a){var l=a.reserve.formattedReserveLiquidationThreshold;0!==m&&(null===i||void 0===i?void 0:i.eModeCategoryId)!==m&&(r=x.b_.EModeBorrowDisabled,l=a.reserve.formattedEModeLiquidationThreshold),n={stableBorrowAPY:a.stableBorrowAPY,variableBorrowAPY:a.reserve.variableBorrowAPY,supplyAPY:a.reserve.stableBorrowAPY,aIncentivesData:a.reserve.aIncentivesData,vIncentivesData:a.reserve.vIncentivesData,sIncentivesData:a.reserve.sIncentivesData,priceInUSD:a.reserve.priceInUSD,liquidationThreshold:l},(0,o.hE)((0,s.gU)(e.increasedStableBorrows,e.reserve.decimals)).plus((0,s.gU)(e.increasedVariableBorrows,e.reserve.decimals)).isGreaterThan(a.reserve.availableLiquidity)?r=x.b_.InsufficientLiquidity:a.reserve.flashLoanEnabled?a.reserve.isFrozen&&(r=x.b_.ReserveFrozen):r=x.b_.AssetNotFlashloanable}else r=x.b_.V3AssetMissing;return w(w({},e),{},{v3Rates:n,migrationDisabled:r})}));return{totalCollateralUSD:h.totalCollateralUSD,totalBorrowsUSD:h.totalBorrowsUSD,healthFactor:h.healthFactor,borrowReserves:D,supplyReserves:S,isolatedReserveV3:b}})),C=function(e,t){var r,n=(0,p.J)(t),i=(0,h.T)(t),s=(0,v.O)(t),o=(0,m.g)(e),a=null===(r=o.data)||void 0===r?void 0:r.userReservesData,l=null===a||void 0===a?void 0:a.filter((function(e){return"0"!==e.underlyingBalance})),c=(0,f.p)(e,t,l),d=(0,u.Y)((function(e){return e.selectedMigrationSupplyAssets}));return(0,b.W)([n,i,s,o,c],(function(e,t,r,n,i){return Z(e,t,r,n,i,d)}))}},49258:function(e,t,r){"use strict";r.d(t,{D:function(){return p}});var n=r(27484),i=r.n(n),s=r(42568),o=r.n(s),a=r(67728),l=r(52369),c=r(37197),d=r(45104),u=r(25957),x=o()((function(e,t,r){return(0,a.qt)(e.reservesData,r,t.userReserves,e.baseCurrencyData,i()().unix(),t.userEmodeCategoryId)})),p=function(e){var t=(0,l.J)(e),r=(0,d.T)(e),n=(0,c.O)(e);return(0,u.W)([t,r,n],x)}},26079:function(e,t,r){"use strict";r.d(t,{N:function(){return o}});var n=r(61953),i=r(29630),s=r(85893),o=function(e){var t=e.text;return(0,s.jsx)(n.Z,{sx:{px:{xs:4,xsm:6},pt:{xs:3.5,xsm:5.5},pb:{xs:6,sxm:7}},children:(0,s.jsx)(i.Z,{color:"text.secondary",children:t})})}},79340:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/v3-migration",function(){return r(40342)}])}},function(e){e.O(0,[4415,8331,6804,9774,2888,179],(function(){return t=79340,e(e.s=t);var t}));var t=e.O();_N_E=t}]);